# 中间件的应用

> 首先这里放一下代码片段
>
> > 
> >
> > ```python
> > from django.utils.deprecation import MiddlewareMixin
> > from django.shortcuts import redirect
> > 
> > 
> > class authMiddleware(MiddlewareMixin):
> >     def process_request(self, request):
> >         # 首先排除用户不需要登录就可以访问的界面
> >         # request.path = '/' 获取用户当前请求的URL
> >         if request.path_info == '/login/':
> >             return
> >         # 读取当前用户的登录信息session信息，如果有就是登陆过，可以放行
> >         info_dict = request.session.get('info')
> >         if info_dict:
> >             return
> > 
> >         # 没登陆过则返回登录界面
> >         return redirect('/login/')
> > ```

## 解释

- 首先我们需认识中间件，对于` Django`来说存在很多中间件，对于浏览器在请求网页时总是会经过他们，

- 同时我们在使用时最好创建一个新的目录以及一个新的`.py`文件来存放中间件的设置

- 需要在`settings.py`里面注册这个中间件，具体写在这里

  > ```python
  > MIDDLEWARE = [
  >     'django.middleware.security.SecurityMiddleware',
  >     '等等等中间有一大堆',
  >     'app01.middlewhere.auth.authMiddleware',
  > ]
  > ```

- 另外可以详细去看看中间件的流程图，会有助于理解这个知识点，详见课程4-8